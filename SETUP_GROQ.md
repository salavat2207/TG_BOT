# Настройка бесплатного Groq API

## Groq API - полностью бесплатный для базового использования!

Groq предоставляет бесплатный tier с щедрыми лимитами:
- **30 запросов в минуту**
- **14,400 запросов в день**
- Доступ к мощным моделям LLaMA 3.1 и Mixtral

## Пошаговая инструкция

### Шаг 1: Регистрация на Groq

1. Перейдите на https://console.groq.com/
2. Нажмите **"Sign Up"** или **"Get Started"**
3. Зарегистрируйтесь через:
   - Email
   - Google аккаунт
   - GitHub аккаунт

### Шаг 2: Создание API ключа

1. После входа в консоль перейдите в раздел **"API Keys"**
   - Или по прямой ссылке: https://console.groq.com/keys
2. Нажмите **"Create API Key"**
3. Введите название ключа (например: "TG_BOT")
4. Скопируйте созданный ключ (он начинается с `gsk_...`)
   - ⚠️ **Важно:** Ключ показывается только один раз! Сохраните его сразу.

### Шаг 3: Настройка в проекте

1. Откройте файл `.env` в корне проекта
2. Добавьте или обновите строку:
   ```env
   GROQ_API_KEY=gsk_ваш_ключ_здесь
   ```
3. Убедитесь, что ключ скопирован полностью без пробелов

### Шаг 4: Проверка работы

1. Перезапустите бота:
   ```bash
   ./run_local.sh
   ```
2. Отправьте боту вопрос в Telegram
3. Если все настроено правильно, бот ответит результатом из базы данных

## Важные моменты

### Приоритет API в коде:
- **Сначала используется Groq** (если `GROQ_API_KEY` установлен)
- **Затем OpenAI** (если Groq не настроен, но есть `OPENAI_API_KEY`)

### Если хотите использовать только Groq:
- Убедитесь, что в `.env` есть `GROQ_API_KEY`
- Можно удалить или закомментировать `OPENAI_API_KEY` (не обязательно)

### Лимиты Groq (бесплатный tier):
- 30 запросов/минуту
- 14,400 запросов/день
- Для большинства ботов этого более чем достаточно!

### Если превышен лимит:
- Бот автоматически покажет понятное сообщение об ошибке
- Подождите минуту и попробуйте снова
- Или перейдите на платный план Groq (если нужно больше)

## Доступные модели Groq (бесплатно):

1. **llama-3.1-70b-versatile** - основная модель (70B параметров, 128k контекст)
2. **llama-3.1-8b-instant** - быстрая модель (8B параметров)
3. **llama-3.2-1b-preview** - легкая модель для тестирования
4. **mixtral-8x7b-32768** - альтернатива от Mistral

Бот автоматически переключается между моделями при ошибках.

## Полезные ссылки:

- **Консоль Groq:** https://console.groq.com/
- **API Keys:** https://console.groq.com/keys
- **Документация моделей:** https://console.groq.com/docs/models
- **Документация API:** https://console.groq.com/docs/api-reference

## Решение проблем

### Ошибка: "Неверный API ключ"
- Проверьте, что ключ скопирован полностью
- Убедитесь, что нет пробелов в начале/конце
- Получите новый ключ, если старый не работает

### Ошибка: "403 Forbidden"
- Проверьте правильность API ключа
- Убедитесь, что аккаунт не заблокирован
- Проверьте лимиты на https://console.groq.com/

### Ошибка: "Модель недоступна"
- Бот автоматически переключится на другую модель
- Проверьте доступные модели: https://console.groq.com/docs/models
